<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>git protocol notes, for developers — git-protocol • pkgdepends</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="git protocol notes, for developers — git-protocol"><meta name="description" content="Assumptions, they might be relaxed or checked for later:
The server must speak the smart protocol, version 1 or 2.
(Although I added some functions specifically for the dumb protocol,
but they are pretty limited.)
We use HTTP transport, not SSH.
The server should have the shallow capability.
The server should have the filter capability if protocol version 2.
Only SHA-1 hashing is supported.

"><meta property="og:description" content="Assumptions, they might be relaxed or checked for later:
The server must speak the smart protocol, version 1 or 2.
(Although I added some functions specifically for the dumb protocol,
but they are pretty limited.)
We use HTTP transport, not SSH.
The server should have the shallow capability.
The server should have the filter capability if protocol version 2.
Only SHA-1 hashing is supported.

"><script defer data-domain="https://r-lib.github.io/pkgdepends,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pkgdepends</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.8.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/pkgdepends-how-to.html">How-to</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/pkgdepends/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>git protocol notes, for developers</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/pkgdepends/blob/main/R/git-protocol.R" class="external-link"><code>R/git-protocol.R</code></a></small>
      <div class="d-none name"><code>git-protocol.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Assumptions, they might be relaxed or checked for later:</p><ul><li><p>The server must speak the smart protocol, version 1 or 2.
(Although I added some functions specifically for the dumb protocol,
but they are pretty limited.)</p></li>
<li><p>We use HTTP transport, not SSH.</p></li>
<li><p>The server should have the <code>shallow</code> capability.</p></li>
<li><p>The server should have the <code>filter</code> capability if protocol version 2.</p></li>
<li><p>Only SHA-1 hashing is supported.</p></li>
</ul></div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Improvements needed:</p><ul><li><p>DONE Tests. (Can always have more.)</p></li>
<li><p>DONE Use async HTTP.</p></li>
<li><p>DONE Support packfiles with deltas. (<code>ofs-delta</code> objects are still
not supported.)</p></li>
<li><p>DONE Optionally send authorization. Already possibly in the URL.</p></li>
<li><p>DONE Better error messages.</p></li>
<li><p>Better errors for non-existing user, repository, ref, PR, etc.</p></li>
</ul><p>Optional improvements:</p><ul><li><p>Support <code>ofs-delta</code> objects in packfiles. Not necessarily, unless we
send this capability, the server is not sending <code>ofs-delta</code> objects.</p></li>
<li><p>Make unpacking faster. It is not fast currently, with all the bit
arithmetic in R. But it is already faster than a <code>tar.gz</code> + uncompress
download from GitHub, so not really needed.</p></li>
</ul><div class="section">
<h3 id="docs-and-other-helpful-links-">Docs and other helpful links:<a class="anchor" aria-label="anchor" href="#docs-and-other-helpful-links-"></a></h3>

<ul><li><p><a href="https://github.com/git/git/blob/master/Documentation/gitprotocol-common.txt" class="external-link">https://github.com/git/git/blob/master/Documentation/gitprotocol-common.txt</a></p></li>
<li><p><a href="https://github.com/git/git/blob/master/Documentation/gitprotocol-pack.txt" class="external-link">https://github.com/git/git/blob/master/Documentation/gitprotocol-pack.txt</a></p></li>
<li><p><a href="https://github.com/git/git/blob/master/Documentation/gitprotocol-v2.txt" class="external-link">https://github.com/git/git/blob/master/Documentation/gitprotocol-v2.txt</a></p></li>
<li><p><a href="https://github.com/calebsander/git-internals/blob/part2/src/main.rs" class="external-link">https://github.com/calebsander/git-internals/blob/part2/src/main.rs</a></p></li>
<li><p><a href="https://dev.to/calebsander/git-internals-part-1-the-git-object-model-474m" class="external-link">https://dev.to/calebsander/git-internals-part-1-the-git-object-model-474m</a></p></li>
</ul></div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

  </div></footer></body></html>

